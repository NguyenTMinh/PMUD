<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"
        integrity="sha512-NmLkDIU1C/C88wi324HBc+S2kLhi08PN5GDeUVVVC/BVt/9Izdsc9SVeVfA1UZbY3sHUlDSyRXhCzHfr6hmPPw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./css/main1.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"
        integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title>Document</title>
</head>

<body>
    <div class="main">
        <div class="detect_search">
            <iframe class="search_img" width="100%" height="450px" hidden
                src="https://www.bing.com/images/search?q=turn_right_traffic_sign&form=QBLH&sp=-1&pq=stop&sc=10-4&qs=n"
                frameborder="100"></iframe>
            <div class="detect_name">
                <h1>
                    Ứng dụng nhận diện biển báo giao thông
                </h1>
            </div>
        </div>
        <div class="detect_btn">
            <button onclick="detect();" id="button"></button>
        </div>
        <div class="detect_desc">
            <div class="container">
                <div class="body">
                    <p>
                    </p>
                </div>
                <div class="upArrow"></div>
            </div>
        </div>
    </div>
    <!-- <script src="main.js"></script> -->
    <script>
        const detect_name = document.querySelector(".detect_name h1");
        const search_img = document.querySelector(".search_img");
        const detect_desc = document.querySelector(".body p");
        const btn = document.querySelector("#button");

        function detect() {
            fetch("http://localhost:5000")
                .then((res) => res.json())
                .then((data) => {
                    console.log(data);
                    fetch("http://localhost/client/server_php/apiGetAll.php")
                        .then((res) => res.json())
                        .then((res) => {
                            console.log(res);

                            for (let i = 0; i < res.length; i++) {
                                if (res[i].id == data[data.length - 1]) {
                                    console.log(data[data.length - 1]);
                                    detect_name.innerHTML = `Đây là biển ${res[i].traffic_sign} , một vài hình ảnh tương tự bạn có thể tìm trên Bing.com `;
                                    search_img.src = ` https://www.bing.com/images/search?q=${res[i].traffic_sign}_traffic_sign&form=QBLH&sp=-1&pq=stop&sc=10-4&qs=n `;
                                    detect_desc.innerHTML = ` ${res[i].descripsion} `;
                                    search_img.hidden = false;
                                }
                            }
                        })
                        .catch((err) => {
                            console.log(err);
                        });
                    let char = (detect_name.innerHTML = data.char);
                    return data;
                })
                .catch((err) => {
                    console.log(err);
                });
        }

    </script>
</body>

</html>